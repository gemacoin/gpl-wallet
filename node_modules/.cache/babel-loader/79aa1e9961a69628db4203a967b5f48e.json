{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SwapButton = exports.TokenIcon = exports.SwapTokenForm = exports.ArrowButton = exports.SwapHeader = void 0;\n\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\n\nvar react_1 = require(\"react\");\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar spl_token_1 = require(\"@solana/spl-token\");\n\nvar anchor_1 = require(\"@project-serum/anchor\");\n\nvar core_1 = require(\"@material-ui/core\");\n\nvar icons_1 = require(\"@material-ui/icons\");\n\nvar Swap_1 = require(\"../context/Swap\");\n\nvar Dex_1 = require(\"../context/Dex\");\n\nvar TokenList_1 = require(\"../context/TokenList\");\n\nvar Token_1 = require(\"../context/Token\");\n\nvar Swap_2 = require(\"../context/Swap\");\n\nvar TokenDialog_1 = __importDefault(require(\"./TokenDialog\"));\n\nvar Settings_1 = require(\"./Settings\");\n\nvar Info_1 = require(\"./Info\");\n\nvar pubkeys_1 = require(\"../utils/pubkeys\");\n\nvar useStyles = (0, core_1.makeStyles)(function (theme) {\n  return {\n    card: {\n      width: theme.spacing(50),\n      borderRadius: theme.spacing(2),\n      boxShadow: \"0px 0px 30px 5px rgba(0,0,0,0.075)\",\n      padding: theme.spacing(2)\n    },\n    tab: {\n      width: \"50%\"\n    },\n    settingsButton: {\n      padding: 0\n    },\n    swapButton: {\n      width: \"100%\",\n      borderRadius: theme.spacing(2),\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      fontSize: 16,\n      fontWeight: 700,\n      padding: theme.spacing(1.5)\n    },\n    swapToFromButton: {\n      display: \"block\",\n      margin: \"10px auto 10px auto\",\n      cursor: \"pointer\"\n    },\n    amountInput: {\n      fontSize: 22,\n      fontWeight: 600\n    },\n    input: {\n      textAlign: \"right\"\n    },\n    swapTokenFormContainer: {\n      borderRadius: theme.spacing(2),\n      boxShadow: \"0px 0px 15px 2px rgba(33,150,243,0.1)\",\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      padding: theme.spacing(1)\n    },\n    swapTokenSelectorContainer: {\n      marginLeft: theme.spacing(1),\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"50%\"\n    },\n    balanceContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      fontSize: \"14px\"\n    },\n    maxButton: {\n      marginLeft: theme.spacing(1),\n      color: theme.palette.primary.main,\n      fontWeight: 700,\n      fontSize: \"12px\",\n      cursor: \"pointer\"\n    },\n    tokenButton: {\n      display: \"flex\",\n      alignItems: \"center\",\n      cursor: \"pointer\",\n      marginBottom: theme.spacing(1)\n    }\n  };\n});\n\nfunction SwapCard(_a) {\n  var containerStyle = _a.containerStyle,\n      contentStyle = _a.contentStyle,\n      swapTokenContainerStyle = _a.swapTokenContainerStyle;\n  var styles = useStyles();\n  return (0, jsx_runtime_1.jsxs)(core_1.Card, __assign({\n    className: styles.card,\n    style: containerStyle\n  }, {\n    children: [(0, jsx_runtime_1.jsx)(SwapHeader, {}, void 0), (0, jsx_runtime_1.jsxs)(\"div\", __assign({\n      style: contentStyle\n    }, {\n      children: [(0, jsx_runtime_1.jsx)(SwapFromForm, {\n        style: swapTokenContainerStyle\n      }, void 0), (0, jsx_runtime_1.jsx)(ArrowButton, {}, void 0), (0, jsx_runtime_1.jsx)(SwapToForm, {\n        style: swapTokenContainerStyle\n      }, void 0), (0, jsx_runtime_1.jsx)(Info_1.InfoLabel, {}, void 0), (0, jsx_runtime_1.jsx)(SwapButton, {}, void 0)]\n    }), void 0)]\n  }), void 0);\n}\n\nexports.default = SwapCard;\n\nfunction SwapHeader() {\n  return (0, jsx_runtime_1.jsxs)(\"div\", __assign({\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      marginBottom: \"16px\"\n    }\n  }, {\n    children: [(0, jsx_runtime_1.jsx)(core_1.Typography, __assign({\n      style: {\n        fontSize: 18,\n        fontWeight: 700\n      }\n    }, {\n      children: \"SWAP\"\n    }), void 0), (0, jsx_runtime_1.jsx)(Settings_1.SettingsButton, {}, void 0)]\n  }), void 0);\n}\n\nexports.SwapHeader = SwapHeader;\n\nfunction ArrowButton() {\n  var styles = useStyles();\n  var theme = (0, core_1.useTheme)();\n  var swapToFromMints = (0, Swap_1.useSwapContext)().swapToFromMints;\n  return (0, jsx_runtime_1.jsx)(icons_1.ImportExportRounded, {\n    className: styles.swapToFromButton,\n    fontSize: \"large\",\n    htmlColor: theme.palette.primary.main,\n    onClick: swapToFromMints\n  }, void 0);\n}\n\nexports.ArrowButton = ArrowButton;\n\nfunction SwapFromForm(_a) {\n  var style = _a.style;\n\n  var _b = (0, Swap_1.useSwapContext)(),\n      fromMint = _b.fromMint,\n      setFromMint = _b.setFromMint,\n      fromAmount = _b.fromAmount,\n      setFromAmount = _b.setFromAmount;\n\n  return (0, jsx_runtime_1.jsx)(SwapTokenForm, {\n    from: true,\n    style: style,\n    mint: fromMint,\n    setMint: setFromMint,\n    amount: fromAmount,\n    setAmount: setFromAmount\n  }, void 0);\n}\n\nfunction SwapToForm(_a) {\n  var style = _a.style;\n\n  var _b = (0, Swap_1.useSwapContext)(),\n      toMint = _b.toMint,\n      setToMint = _b.setToMint,\n      toAmount = _b.toAmount,\n      setToAmount = _b.setToAmount;\n\n  return (0, jsx_runtime_1.jsx)(SwapTokenForm, {\n    from: false,\n    style: style,\n    mint: toMint,\n    setMint: setToMint,\n    amount: toAmount,\n    setAmount: setToAmount\n  }, void 0);\n}\n\nfunction SwapTokenForm(_a) {\n  var from = _a.from,\n      style = _a.style,\n      mint = _a.mint,\n      setMint = _a.setMint,\n      amount = _a.amount,\n      setAmount = _a.setAmount;\n  var styles = useStyles();\n\n  var _b = (0, react_1.useState)(false),\n      showTokenDialog = _b[0],\n      setShowTokenDialog = _b[1];\n\n  var tokenAccount = (0, Token_1.useOwnedTokenAccount)(mint);\n  var mintAccount = (0, Token_1.useMint)(mint);\n  var balance = tokenAccount && mintAccount && tokenAccount.account.amount.toNumber() / Math.pow(10, mintAccount.decimals);\n  var formattedAmount = mintAccount && amount ? amount.toLocaleString(\"fullwide\", {\n    maximumFractionDigits: mintAccount.decimals,\n    useGrouping: false\n  }) : amount;\n  return (0, jsx_runtime_1.jsxs)(\"div\", __assign({\n    className: styles.swapTokenFormContainer,\n    style: style\n  }, {\n    children: [(0, jsx_runtime_1.jsxs)(\"div\", __assign({\n      className: styles.swapTokenSelectorContainer\n    }, {\n      children: [(0, jsx_runtime_1.jsx)(TokenButton, {\n        mint: mint,\n        onClick: function () {\n          return setShowTokenDialog(true);\n        }\n      }, void 0), (0, jsx_runtime_1.jsxs)(core_1.Typography, __assign({\n        color: \"textSecondary\",\n        className: styles.balanceContainer\n      }, {\n        children: [tokenAccount && mintAccount ? \"Balance: \" + (balance === null || balance === void 0 ? void 0 : balance.toFixed(mintAccount.decimals)) : \"-\", from && !!balance ? (0, jsx_runtime_1.jsx)(\"span\", __assign({\n          className: styles.maxButton,\n          onClick: function () {\n            return setAmount(balance);\n          }\n        }, {\n          children: \"MAX\"\n        }), void 0) : null]\n      }), void 0)]\n    }), void 0), (0, jsx_runtime_1.jsx)(core_1.TextField, {\n      type: \"number\",\n      value: formattedAmount,\n      onChange: function (e) {\n        return setAmount(parseFloat(e.target.value));\n      },\n      InputProps: {\n        disableUnderline: true,\n        classes: {\n          root: styles.amountInput,\n          input: styles.input\n        }\n      }\n    }, void 0), (0, jsx_runtime_1.jsx)(TokenDialog_1.default, {\n      setMint: setMint,\n      open: showTokenDialog,\n      onClose: function () {\n        return setShowTokenDialog(false);\n      }\n    }, void 0)]\n  }), void 0);\n}\n\nexports.SwapTokenForm = SwapTokenForm;\n\nfunction TokenButton(_a) {\n  var mint = _a.mint,\n      onClick = _a.onClick;\n  var styles = useStyles();\n  var theme = (0, core_1.useTheme)();\n  return (0, jsx_runtime_1.jsxs)(\"div\", __assign({\n    onClick: onClick,\n    className: styles.tokenButton\n  }, {\n    children: [(0, jsx_runtime_1.jsx)(TokenIcon, {\n      mint: mint,\n      style: {\n        width: theme.spacing(4)\n      }\n    }, void 0), (0, jsx_runtime_1.jsx)(TokenName, {\n      mint: mint,\n      style: {\n        fontSize: 14,\n        fontWeight: 700\n      }\n    }, void 0), (0, jsx_runtime_1.jsx)(icons_1.ExpandMore, {}, void 0)]\n  }), void 0);\n}\n\nfunction TokenIcon(_a) {\n  var mint = _a.mint,\n      style = _a.style;\n  var tokenMap = (0, TokenList_1.useTokenMap)();\n  var tokenInfo = tokenMap.get(mint.toString());\n  return (0, jsx_runtime_1.jsx)(\"div\", __assign({\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      flexDirection: \"column\"\n    }\n  }, {\n    children: (tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.logoURI) ? (0, jsx_runtime_1.jsx)(\"img\", {\n      alt: \"Logo\",\n      style: style,\n      src: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.logoURI\n    }, void 0) : (0, jsx_runtime_1.jsx)(\"div\", {\n      style: style\n    }, void 0)\n  }), void 0);\n}\n\nexports.TokenIcon = TokenIcon;\n\nfunction TokenName(_a) {\n  var mint = _a.mint,\n      style = _a.style;\n  var tokenMap = (0, TokenList_1.useTokenMap)();\n  var theme = (0, core_1.useTheme)();\n  var tokenInfo = tokenMap.get(mint.toString());\n  return (0, jsx_runtime_1.jsx)(core_1.Typography, __assign({\n    style: __assign({\n      marginLeft: theme.spacing(2),\n      marginRight: theme.spacing(1)\n    }, style)\n  }, {\n    children: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.symbol\n  }), void 0);\n}\n\nfunction SwapButton() {\n  var _this = this;\n\n  var styles = useStyles();\n\n  var _a = (0, Swap_1.useSwapContext)(),\n      fromMint = _a.fromMint,\n      toMint = _a.toMint,\n      fromAmount = _a.fromAmount,\n      slippage = _a.slippage,\n      isClosingNewAccounts = _a.isClosingNewAccounts,\n      isStrict = _a.isStrict;\n\n  var swapClient = (0, Dex_1.useDexContext)().swapClient;\n  var fromMintInfo = (0, Token_1.useMint)(fromMint);\n  var toMintInfo = (0, Token_1.useMint)(toMint);\n  var openOrders = (0, Dex_1.useOpenOrders)();\n  var route = (0, Dex_1.useRouteVerbose)(fromMint, toMint);\n  var fromMarket = (0, Dex_1.useMarket)(route && route.markets ? route.markets[0] : undefined);\n  var toMarket = (0, Dex_1.useMarket)(route && route.markets ? route.markets[1] : undefined);\n  var canSwap = (0, Swap_2.useCanSwap)();\n  var referral = (0, Swap_2.useReferral)(fromMarket);\n  var fair = (0, Swap_1.useSwapFair)();\n  var fromWallet = (0, Token_1.useOwnedTokenAccount)(fromMint);\n  var toWallet = (0, Token_1.useOwnedTokenAccount)(toMint);\n  var quoteMint = fromMarket && fromMarket.quoteMintAddress;\n  var quoteMintInfo = (0, Token_1.useMint)(quoteMint);\n  var quoteWallet = (0, Token_1.useOwnedTokenAccount)(quoteMint); // Click handler.\n\n  var sendSwapTransaction = function () {\n    return __awaiter(_this, void 0, void 0, function () {\n      var amount, isSol, wrappedSolAccount, txs, _a, wrapTx, wrapSigners, _b, unwrapTx, unwrapSigners, tx;\n\n      var _c, _d;\n\n      var _this = this;\n\n      return __generator(this, function (_e) {\n        switch (_e.label) {\n          case 0:\n            if (!fromMintInfo || !toMintInfo) {\n              throw new Error(\"Unable to calculate mint decimals\");\n            }\n\n            if (!fair) {\n              throw new Error(\"Invalid fair\");\n            }\n\n            if (!quoteMint || !quoteMintInfo) {\n              throw new Error(\"Quote mint not found\");\n            }\n\n            amount = new anchor_1.BN(fromAmount * Math.pow(10, fromMintInfo.decimals));\n            isSol = fromMint.equals(pubkeys_1.SOL_MINT) || toMint.equals(pubkeys_1.SOL_MINT);\n            wrappedSolAccount = isSol ? web3_js_1.Keypair.generate() : undefined;\n            return [4\n            /*yield*/\n            , function () {\n              return __awaiter(_this, void 0, void 0, function () {\n                var minExchangeRate, fromOpenOrders, toOpenOrders, fromWalletAddr, toWalletAddr;\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      if (!fromMarket) {\n                        throw new Error(\"Market undefined\");\n                      }\n\n                      minExchangeRate = {\n                        rate: new anchor_1.BN(Math.pow(10, toMintInfo.decimals) * Dex_1.FEE_MULTIPLIER / fair).muln(100 - slippage).divn(100),\n                        fromDecimals: fromMintInfo.decimals,\n                        quoteDecimals: quoteMintInfo.decimals,\n                        strict: isStrict\n                      };\n                      fromOpenOrders = fromMarket ? openOrders.get(fromMarket === null || fromMarket === void 0 ? void 0 : fromMarket.address.toString()) : undefined;\n                      toOpenOrders = toMarket ? openOrders.get(toMarket === null || toMarket === void 0 ? void 0 : toMarket.address.toString()) : undefined;\n                      fromWalletAddr = fromMint.equals(pubkeys_1.SOL_MINT) ? wrappedSolAccount.publicKey : fromWallet ? fromWallet.publicKey : undefined;\n                      toWalletAddr = toMint.equals(pubkeys_1.SOL_MINT) ? wrappedSolAccount.publicKey : toWallet ? toWallet.publicKey : undefined;\n                      return [4\n                      /*yield*/\n                      , swapClient.swapTxs({\n                        fromMint: fromMint,\n                        toMint: toMint,\n                        quoteMint: quoteMint,\n                        amount: amount,\n                        minExchangeRate: minExchangeRate,\n                        referral: referral,\n                        fromMarket: fromMarket,\n                        toMarket: toMarket,\n                        // Automatically created if undefined.\n                        fromOpenOrders: fromOpenOrders ? fromOpenOrders[0].address : undefined,\n                        toOpenOrders: toOpenOrders ? toOpenOrders[0].address : undefined,\n                        fromWallet: fromWalletAddr,\n                        toWallet: toWalletAddr,\n                        quoteWallet: quoteWallet ? quoteWallet.publicKey : undefined,\n                        // Auto close newly created open orders accounts.\n                        close: isClosingNewAccounts\n                      })];\n\n                    case 1:\n                      return [2\n                      /*return*/\n                      , _a.sent()];\n                  }\n                });\n              });\n            }()];\n\n          case 1:\n            txs = _e.sent();\n            if (!isSol) return [3\n            /*break*/\n            , 3];\n\n            if (txs.length > 1) {\n              throw new Error(\"GEMA must be swapped in a single transaction\");\n            }\n\n            return [4\n            /*yield*/\n            , wrapSol(swapClient.program.provider, wrappedSolAccount, fromMint, amount)];\n\n          case 2:\n            _a = _e.sent(), wrapTx = _a.tx, wrapSigners = _a.signers;\n            _b = unwrapSol(swapClient.program.provider, wrappedSolAccount), unwrapTx = _b.tx, unwrapSigners = _b.signers;\n            tx = new web3_js_1.Transaction();\n            tx.add(wrapTx);\n            tx.add(txs[0].tx);\n            tx.add(unwrapTx);\n            txs[0].tx = tx;\n\n            (_c = txs[0].signers).push.apply(_c, wrapSigners);\n\n            (_d = txs[0].signers).push.apply(_d, unwrapSigners);\n\n            _e.label = 3;\n\n          case 3:\n            return [4\n            /*yield*/\n            , swapClient.program.provider.sendAll(txs)];\n\n          case 4:\n            _e.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return (0, jsx_runtime_1.jsx)(core_1.Button, __assign({\n    variant: \"contained\",\n    className: styles.swapButton,\n    onClick: sendSwapTransaction,\n    disabled: !canSwap\n  }, {\n    children: \"Swap\"\n  }), void 0);\n}\n\nexports.SwapButton = SwapButton;\n\nfunction wrapSol(provider, wrappedSolAccount, fromMint, amount) {\n  return __awaiter(this, void 0, void 0, function () {\n    var tx, signers, _a, _b, _c, _d;\n\n    var _e;\n\n    return __generator(this, function (_f) {\n      switch (_f.label) {\n        case 0:\n          tx = new web3_js_1.Transaction();\n          signers = [wrappedSolAccount]; // Create new, rent exempt account.\n\n          _b = (_a = tx).add;\n          _d = (_c = web3_js_1.SystemProgram).createAccount;\n          _e = {\n            fromPubkey: provider.wallet.publicKey,\n            newAccountPubkey: wrappedSolAccount.publicKey\n          };\n          return [4\n          /*yield*/\n          , spl_token_1.Token.getMinBalanceRentForExemptAccount(provider.connection)];\n\n        case 1:\n          // Create new, rent exempt account.\n          _b.apply(_a, [_d.apply(_c, [(_e.carats = _f.sent(), _e.space = 165, _e.programId = spl_token_1.TOKEN_PROGRAM_ID, _e)])]); // Transfer carats. These will be converted to an GPL balance by the\n          // token program.\n\n\n          if (fromMint.equals(pubkeys_1.SOL_MINT)) {\n            tx.add(web3_js_1.SystemProgram.transfer({\n              fromPubkey: provider.wallet.publicKey,\n              toPubkey: wrappedSolAccount.publicKey,\n              carats: amount.toNumber()\n            }));\n          } // Initialize the account.\n\n\n          tx.add(spl_token_1.Token.createInitAccountInstruction(spl_token_1.TOKEN_PROGRAM_ID, pubkeys_1.WRAPPED_GEMA_MINT, wrappedSolAccount.publicKey, provider.wallet.publicKey));\n          return [2\n          /*return*/\n          , {\n            tx: tx,\n            signers: signers\n          }];\n      }\n    });\n  });\n}\n\nfunction unwrapSol(provider, wrappedSolAccount) {\n  var tx = new web3_js_1.Transaction();\n  tx.add(spl_token_1.Token.createCloseAccountInstruction(spl_token_1.TOKEN_PROGRAM_ID, wrappedSolAccount.publicKey, provider.wallet.publicKey, provider.wallet.publicKey, []));\n  return {\n    tx: tx,\n    signers: []\n  };\n}","map":{"version":3,"sources":["/home/imentus/spl-token-wallet/node_modules/@project-serum/swap-ui/dist/components/Swap.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__importDefault","mod","__esModule","defineProperty","exports","SwapButton","TokenIcon","SwapTokenForm","ArrowButton","SwapHeader","jsx_runtime_1","require","react_1","web3_js_1","spl_token_1","anchor_1","core_1","icons_1","Swap_1","Dex_1","TokenList_1","Token_1","Swap_2","TokenDialog_1","Settings_1","Info_1","pubkeys_1","useStyles","makeStyles","theme","card","width","spacing","borderRadius","boxShadow","padding","tab","settingsButton","swapButton","backgroundColor","palette","primary","main","color","contrastText","fontSize","fontWeight","swapToFromButton","display","margin","cursor","amountInput","input","textAlign","swapTokenFormContainer","justifyContent","swapTokenSelectorContainer","marginLeft","flexDirection","balanceContainer","alignItems","maxButton","tokenButton","marginBottom","SwapCard","_a","containerStyle","contentStyle","swapTokenContainerStyle","styles","jsxs","Card","className","style","children","jsx","SwapFromForm","SwapToForm","InfoLabel","default","Typography","SettingsButton","useTheme","swapToFromMints","useSwapContext","ImportExportRounded","htmlColor","onClick","_b","fromMint","setFromMint","fromAmount","setFromAmount","from","mint","setMint","amount","setAmount","toMint","setToMint","toAmount","setToAmount","useState","showTokenDialog","setShowTokenDialog","tokenAccount","useOwnedTokenAccount","mintAccount","useMint","balance","account","toNumber","Math","pow","decimals","formattedAmount","toLocaleString","maximumFractionDigits","useGrouping","TokenButton","toFixed","TextField","type","onChange","parseFloat","target","InputProps","disableUnderline","classes","root","open","onClose","TokenName","ExpandMore","tokenMap","useTokenMap","tokenInfo","get","toString","logoURI","alt","src","marginRight","symbol","_this","slippage","isClosingNewAccounts","isStrict","swapClient","useDexContext","fromMintInfo","toMintInfo","openOrders","useOpenOrders","route","useRouteVerbose","fromMarket","useMarket","markets","undefined","toMarket","canSwap","useCanSwap","referral","useReferral","fair","useSwapFair","fromWallet","toWallet","quoteMint","quoteMintAddress","quoteMintInfo","quoteWallet","sendSwapTransaction","isSol","wrappedSolAccount","txs","wrapTx","wrapSigners","unwrapTx","unwrapSigners","tx","_c","_d","_e","Error","BN","equals","SOL_MINT","Keypair","generate","minExchangeRate","fromOpenOrders","toOpenOrders","fromWalletAddr","toWalletAddr","rate","FEE_MULTIPLIER","muln","divn","fromDecimals","quoteDecimals","strict","address","publicKey","swapTxs","close","wrapSol","program","provider","signers","unwrapSol","Transaction","add","sendAll","Button","variant","disabled","_f","SystemProgram","createAccount","fromPubkey","wallet","newAccountPubkey","Token","getMinBalanceRentForExemptAccount","connection","carats","space","programId","TOKEN_PROGRAM_ID","transfer","toPubkey","createInitAccountInstruction","WRAPPED_GEMA_MINT","createCloseAccountInstruction"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SwapButton = exports.TokenIcon = exports.SwapTokenForm = exports.ArrowButton = exports.SwapHeader = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nvar react_1 = require(\"react\");\nvar web3_js_1 = require(\"@solana/web3.js\");\nvar spl_token_1 = require(\"@solana/spl-token\");\nvar anchor_1 = require(\"@project-serum/anchor\");\nvar core_1 = require(\"@material-ui/core\");\nvar icons_1 = require(\"@material-ui/icons\");\nvar Swap_1 = require(\"../context/Swap\");\nvar Dex_1 = require(\"../context/Dex\");\nvar TokenList_1 = require(\"../context/TokenList\");\nvar Token_1 = require(\"../context/Token\");\nvar Swap_2 = require(\"../context/Swap\");\nvar TokenDialog_1 = __importDefault(require(\"./TokenDialog\"));\nvar Settings_1 = require(\"./Settings\");\nvar Info_1 = require(\"./Info\");\nvar pubkeys_1 = require(\"../utils/pubkeys\");\nvar useStyles = (0, core_1.makeStyles)(function (theme) { return ({\n    card: {\n        width: theme.spacing(50),\n        borderRadius: theme.spacing(2),\n        boxShadow: \"0px 0px 30px 5px rgba(0,0,0,0.075)\",\n        padding: theme.spacing(2),\n    },\n    tab: {\n        width: \"50%\",\n    },\n    settingsButton: {\n        padding: 0,\n    },\n    swapButton: {\n        width: \"100%\",\n        borderRadius: theme.spacing(2),\n        backgroundColor: theme.palette.primary.main,\n        color: theme.palette.primary.contrastText,\n        fontSize: 16,\n        fontWeight: 700,\n        padding: theme.spacing(1.5),\n    },\n    swapToFromButton: {\n        display: \"block\",\n        margin: \"10px auto 10px auto\",\n        cursor: \"pointer\",\n    },\n    amountInput: {\n        fontSize: 22,\n        fontWeight: 600,\n    },\n    input: {\n        textAlign: \"right\",\n    },\n    swapTokenFormContainer: {\n        borderRadius: theme.spacing(2),\n        boxShadow: \"0px 0px 15px 2px rgba(33,150,243,0.1)\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        padding: theme.spacing(1),\n    },\n    swapTokenSelectorContainer: {\n        marginLeft: theme.spacing(1),\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"50%\",\n    },\n    balanceContainer: {\n        display: \"flex\",\n        alignItems: \"center\",\n        fontSize: \"14px\",\n    },\n    maxButton: {\n        marginLeft: theme.spacing(1),\n        color: theme.palette.primary.main,\n        fontWeight: 700,\n        fontSize: \"12px\",\n        cursor: \"pointer\",\n    },\n    tokenButton: {\n        display: \"flex\",\n        alignItems: \"center\",\n        cursor: \"pointer\",\n        marginBottom: theme.spacing(1),\n    },\n}); });\nfunction SwapCard(_a) {\n    var containerStyle = _a.containerStyle, contentStyle = _a.contentStyle, swapTokenContainerStyle = _a.swapTokenContainerStyle;\n    var styles = useStyles();\n    return ((0, jsx_runtime_1.jsxs)(core_1.Card, __assign({ className: styles.card, style: containerStyle }, { children: [(0, jsx_runtime_1.jsx)(SwapHeader, {}, void 0), (0, jsx_runtime_1.jsxs)(\"div\", __assign({ style: contentStyle }, { children: [(0, jsx_runtime_1.jsx)(SwapFromForm, { style: swapTokenContainerStyle }, void 0), (0, jsx_runtime_1.jsx)(ArrowButton, {}, void 0), (0, jsx_runtime_1.jsx)(SwapToForm, { style: swapTokenContainerStyle }, void 0), (0, jsx_runtime_1.jsx)(Info_1.InfoLabel, {}, void 0), (0, jsx_runtime_1.jsx)(SwapButton, {}, void 0)] }), void 0)] }), void 0));\n}\nexports.default = SwapCard;\nfunction SwapHeader() {\n    return ((0, jsx_runtime_1.jsxs)(\"div\", __assign({ style: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            marginBottom: \"16px\",\n        } }, { children: [(0, jsx_runtime_1.jsx)(core_1.Typography, __assign({ style: {\n                    fontSize: 18,\n                    fontWeight: 700,\n                } }, { children: \"SWAP\" }), void 0), (0, jsx_runtime_1.jsx)(Settings_1.SettingsButton, {}, void 0)] }), void 0));\n}\nexports.SwapHeader = SwapHeader;\nfunction ArrowButton() {\n    var styles = useStyles();\n    var theme = (0, core_1.useTheme)();\n    var swapToFromMints = (0, Swap_1.useSwapContext)().swapToFromMints;\n    return ((0, jsx_runtime_1.jsx)(icons_1.ImportExportRounded, { className: styles.swapToFromButton, fontSize: \"large\", htmlColor: theme.palette.primary.main, onClick: swapToFromMints }, void 0));\n}\nexports.ArrowButton = ArrowButton;\nfunction SwapFromForm(_a) {\n    var style = _a.style;\n    var _b = (0, Swap_1.useSwapContext)(), fromMint = _b.fromMint, setFromMint = _b.setFromMint, fromAmount = _b.fromAmount, setFromAmount = _b.setFromAmount;\n    return ((0, jsx_runtime_1.jsx)(SwapTokenForm, { from: true, style: style, mint: fromMint, setMint: setFromMint, amount: fromAmount, setAmount: setFromAmount }, void 0));\n}\nfunction SwapToForm(_a) {\n    var style = _a.style;\n    var _b = (0, Swap_1.useSwapContext)(), toMint = _b.toMint, setToMint = _b.setToMint, toAmount = _b.toAmount, setToAmount = _b.setToAmount;\n    return ((0, jsx_runtime_1.jsx)(SwapTokenForm, { from: false, style: style, mint: toMint, setMint: setToMint, amount: toAmount, setAmount: setToAmount }, void 0));\n}\nfunction SwapTokenForm(_a) {\n    var from = _a.from, style = _a.style, mint = _a.mint, setMint = _a.setMint, amount = _a.amount, setAmount = _a.setAmount;\n    var styles = useStyles();\n    var _b = (0, react_1.useState)(false), showTokenDialog = _b[0], setShowTokenDialog = _b[1];\n    var tokenAccount = (0, Token_1.useOwnedTokenAccount)(mint);\n    var mintAccount = (0, Token_1.useMint)(mint);\n    var balance = tokenAccount &&\n        mintAccount &&\n        tokenAccount.account.amount.toNumber() / Math.pow(10, mintAccount.decimals);\n    var formattedAmount = mintAccount && amount\n        ? amount.toLocaleString(\"fullwide\", {\n            maximumFractionDigits: mintAccount.decimals,\n            useGrouping: false,\n        })\n        : amount;\n    return ((0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: styles.swapTokenFormContainer, style: style }, { children: [(0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: styles.swapTokenSelectorContainer }, { children: [(0, jsx_runtime_1.jsx)(TokenButton, { mint: mint, onClick: function () { return setShowTokenDialog(true); } }, void 0), (0, jsx_runtime_1.jsxs)(core_1.Typography, __assign({ color: \"textSecondary\", className: styles.balanceContainer }, { children: [tokenAccount && mintAccount\n                                ? \"Balance: \" + (balance === null || balance === void 0 ? void 0 : balance.toFixed(mintAccount.decimals))\n                                : \"-\", from && !!balance ? ((0, jsx_runtime_1.jsx)(\"span\", __assign({ className: styles.maxButton, onClick: function () { return setAmount(balance); } }, { children: \"MAX\" }), void 0)) : null] }), void 0)] }), void 0), (0, jsx_runtime_1.jsx)(core_1.TextField, { type: \"number\", value: formattedAmount, onChange: function (e) { return setAmount(parseFloat(e.target.value)); }, InputProps: {\n                    disableUnderline: true,\n                    classes: {\n                        root: styles.amountInput,\n                        input: styles.input,\n                    },\n                } }, void 0), (0, jsx_runtime_1.jsx)(TokenDialog_1.default, { setMint: setMint, open: showTokenDialog, onClose: function () { return setShowTokenDialog(false); } }, void 0)] }), void 0));\n}\nexports.SwapTokenForm = SwapTokenForm;\nfunction TokenButton(_a) {\n    var mint = _a.mint, onClick = _a.onClick;\n    var styles = useStyles();\n    var theme = (0, core_1.useTheme)();\n    return ((0, jsx_runtime_1.jsxs)(\"div\", __assign({ onClick: onClick, className: styles.tokenButton }, { children: [(0, jsx_runtime_1.jsx)(TokenIcon, { mint: mint, style: { width: theme.spacing(4) } }, void 0), (0, jsx_runtime_1.jsx)(TokenName, { mint: mint, style: { fontSize: 14, fontWeight: 700 } }, void 0), (0, jsx_runtime_1.jsx)(icons_1.ExpandMore, {}, void 0)] }), void 0));\n}\nfunction TokenIcon(_a) {\n    var mint = _a.mint, style = _a.style;\n    var tokenMap = (0, TokenList_1.useTokenMap)();\n    var tokenInfo = tokenMap.get(mint.toString());\n    return ((0, jsx_runtime_1.jsx)(\"div\", __assign({ style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            flexDirection: \"column\",\n        } }, { children: (tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.logoURI) ? ((0, jsx_runtime_1.jsx)(\"img\", { alt: \"Logo\", style: style, src: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.logoURI }, void 0)) : ((0, jsx_runtime_1.jsx)(\"div\", { style: style }, void 0)) }), void 0));\n}\nexports.TokenIcon = TokenIcon;\nfunction TokenName(_a) {\n    var mint = _a.mint, style = _a.style;\n    var tokenMap = (0, TokenList_1.useTokenMap)();\n    var theme = (0, core_1.useTheme)();\n    var tokenInfo = tokenMap.get(mint.toString());\n    return ((0, jsx_runtime_1.jsx)(core_1.Typography, __assign({ style: __assign({ marginLeft: theme.spacing(2), marginRight: theme.spacing(1) }, style) }, { children: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.symbol }), void 0));\n}\nfunction SwapButton() {\n    var _this = this;\n    var styles = useStyles();\n    var _a = (0, Swap_1.useSwapContext)(), fromMint = _a.fromMint, toMint = _a.toMint, fromAmount = _a.fromAmount, slippage = _a.slippage, isClosingNewAccounts = _a.isClosingNewAccounts, isStrict = _a.isStrict;\n    var swapClient = (0, Dex_1.useDexContext)().swapClient;\n    var fromMintInfo = (0, Token_1.useMint)(fromMint);\n    var toMintInfo = (0, Token_1.useMint)(toMint);\n    var openOrders = (0, Dex_1.useOpenOrders)();\n    var route = (0, Dex_1.useRouteVerbose)(fromMint, toMint);\n    var fromMarket = (0, Dex_1.useMarket)(route && route.markets ? route.markets[0] : undefined);\n    var toMarket = (0, Dex_1.useMarket)(route && route.markets ? route.markets[1] : undefined);\n    var canSwap = (0, Swap_2.useCanSwap)();\n    var referral = (0, Swap_2.useReferral)(fromMarket);\n    var fair = (0, Swap_1.useSwapFair)();\n    var fromWallet = (0, Token_1.useOwnedTokenAccount)(fromMint);\n    var toWallet = (0, Token_1.useOwnedTokenAccount)(toMint);\n    var quoteMint = fromMarket && fromMarket.quoteMintAddress;\n    var quoteMintInfo = (0, Token_1.useMint)(quoteMint);\n    var quoteWallet = (0, Token_1.useOwnedTokenAccount)(quoteMint);\n    // Click handler.\n    var sendSwapTransaction = function () { return __awaiter(_this, void 0, void 0, function () {\n        var amount, isSol, wrappedSolAccount, txs, _a, wrapTx, wrapSigners, _b, unwrapTx, unwrapSigners, tx;\n        var _c, _d;\n        var _this = this;\n        return __generator(this, function (_e) {\n            switch (_e.label) {\n                case 0:\n                    if (!fromMintInfo || !toMintInfo) {\n                        throw new Error(\"Unable to calculate mint decimals\");\n                    }\n                    if (!fair) {\n                        throw new Error(\"Invalid fair\");\n                    }\n                    if (!quoteMint || !quoteMintInfo) {\n                        throw new Error(\"Quote mint not found\");\n                    }\n                    amount = new anchor_1.BN(fromAmount * Math.pow(10, fromMintInfo.decimals));\n                    isSol = fromMint.equals(pubkeys_1.SOL_MINT) || toMint.equals(pubkeys_1.SOL_MINT);\n                    wrappedSolAccount = isSol ? web3_js_1.Keypair.generate() : undefined;\n                    return [4 /*yield*/, (function () { return __awaiter(_this, void 0, void 0, function () {\n                            var minExchangeRate, fromOpenOrders, toOpenOrders, fromWalletAddr, toWalletAddr;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        if (!fromMarket) {\n                                            throw new Error(\"Market undefined\");\n                                        }\n                                        minExchangeRate = {\n                                            rate: new anchor_1.BN((Math.pow(10, toMintInfo.decimals) * Dex_1.FEE_MULTIPLIER) / fair)\n                                                .muln(100 - slippage)\n                                                .divn(100),\n                                            fromDecimals: fromMintInfo.decimals,\n                                            quoteDecimals: quoteMintInfo.decimals,\n                                            strict: isStrict,\n                                        };\n                                        fromOpenOrders = fromMarket\n                                            ? openOrders.get(fromMarket === null || fromMarket === void 0 ? void 0 : fromMarket.address.toString())\n                                            : undefined;\n                                        toOpenOrders = toMarket\n                                            ? openOrders.get(toMarket === null || toMarket === void 0 ? void 0 : toMarket.address.toString())\n                                            : undefined;\n                                        fromWalletAddr = fromMint.equals(pubkeys_1.SOL_MINT)\n                                            ? wrappedSolAccount.publicKey\n                                            : fromWallet\n                                                ? fromWallet.publicKey\n                                                : undefined;\n                                        toWalletAddr = toMint.equals(pubkeys_1.SOL_MINT)\n                                            ? wrappedSolAccount.publicKey\n                                            : toWallet\n                                                ? toWallet.publicKey\n                                                : undefined;\n                                        return [4 /*yield*/, swapClient.swapTxs({\n                                                fromMint: fromMint,\n                                                toMint: toMint,\n                                                quoteMint: quoteMint,\n                                                amount: amount,\n                                                minExchangeRate: minExchangeRate,\n                                                referral: referral,\n                                                fromMarket: fromMarket,\n                                                toMarket: toMarket,\n                                                // Automatically created if undefined.\n                                                fromOpenOrders: fromOpenOrders ? fromOpenOrders[0].address : undefined,\n                                                toOpenOrders: toOpenOrders ? toOpenOrders[0].address : undefined,\n                                                fromWallet: fromWalletAddr,\n                                                toWallet: toWalletAddr,\n                                                quoteWallet: quoteWallet ? quoteWallet.publicKey : undefined,\n                                                // Auto close newly created open orders accounts.\n                                                close: isClosingNewAccounts,\n                                            })];\n                                    case 1: return [2 /*return*/, _a.sent()];\n                                }\n                            });\n                        }); })()];\n                case 1:\n                    txs = _e.sent();\n                    if (!isSol) return [3 /*break*/, 3];\n                    if (txs.length > 1) {\n                        throw new Error(\"GEMA must be swapped in a single transaction\");\n                    }\n                    return [4 /*yield*/, wrapSol(swapClient.program.provider, wrappedSolAccount, fromMint, amount)];\n                case 2:\n                    _a = _e.sent(), wrapTx = _a.tx, wrapSigners = _a.signers;\n                    _b = unwrapSol(swapClient.program.provider, wrappedSolAccount), unwrapTx = _b.tx, unwrapSigners = _b.signers;\n                    tx = new web3_js_1.Transaction();\n                    tx.add(wrapTx);\n                    tx.add(txs[0].tx);\n                    tx.add(unwrapTx);\n                    txs[0].tx = tx;\n                    (_c = txs[0].signers).push.apply(_c, wrapSigners);\n                    (_d = txs[0].signers).push.apply(_d, unwrapSigners);\n                    _e.label = 3;\n                case 3: return [4 /*yield*/, swapClient.program.provider.sendAll(txs)];\n                case 4:\n                    _e.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    return ((0, jsx_runtime_1.jsx)(core_1.Button, __assign({ variant: \"contained\", className: styles.swapButton, onClick: sendSwapTransaction, disabled: !canSwap }, { children: \"Swap\" }), void 0));\n}\nexports.SwapButton = SwapButton;\nfunction wrapSol(provider, wrappedSolAccount, fromMint, amount) {\n    return __awaiter(this, void 0, void 0, function () {\n        var tx, signers, _a, _b, _c, _d;\n        var _e;\n        return __generator(this, function (_f) {\n            switch (_f.label) {\n                case 0:\n                    tx = new web3_js_1.Transaction();\n                    signers = [wrappedSolAccount];\n                    // Create new, rent exempt account.\n                    _b = (_a = tx).add;\n                    _d = (_c = web3_js_1.SystemProgram).createAccount;\n                    _e = {\n                        fromPubkey: provider.wallet.publicKey,\n                        newAccountPubkey: wrappedSolAccount.publicKey\n                    };\n                    return [4 /*yield*/, spl_token_1.Token.getMinBalanceRentForExemptAccount(provider.connection)];\n                case 1:\n                    // Create new, rent exempt account.\n                    _b.apply(_a, [_d.apply(_c, [(_e.carats = _f.sent(),\n                                _e.space = 165,\n                                _e.programId = spl_token_1.TOKEN_PROGRAM_ID,\n                                _e)])]);\n                    // Transfer carats. These will be converted to an GPL balance by the\n                    // token program.\n                    if (fromMint.equals(pubkeys_1.SOL_MINT)) {\n                        tx.add(web3_js_1.SystemProgram.transfer({\n                            fromPubkey: provider.wallet.publicKey,\n                            toPubkey: wrappedSolAccount.publicKey,\n                            carats: amount.toNumber(),\n                        }));\n                    }\n                    // Initialize the account.\n                    tx.add(spl_token_1.Token.createInitAccountInstruction(spl_token_1.TOKEN_PROGRAM_ID, pubkeys_1.WRAPPED_GEMA_MINT, wrappedSolAccount.publicKey, provider.wallet.publicKey));\n                    return [2 /*return*/, { tx: tx, signers: signers }];\n            }\n        });\n    });\n}\nfunction unwrapSol(provider, wrappedSolAccount) {\n    var tx = new web3_js_1.Transaction();\n    tx.add(spl_token_1.Token.createCloseAccountInstruction(spl_token_1.TOKEN_PROGRAM_ID, wrappedSolAccount.publicKey, provider.wallet.publicKey, provider.wallet.publicKey, []));\n    return { tx: tx, signers: [] };\n}\n"]},"metadata":{},"sourceType":"script"}